
<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formation Programmation ‚Äì Optimum Entreprise</title>

  <!-- Tailwind CDN + config palette -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: { red: '#5d1212', yellow: '#facc15', gold: '#f59e0b' }
          },
          boxShadow: {
            glow: '0 0 0 3px rgba(250,204,21,.35)'
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <style>
    body{font-family: 'Inter', sans-serif}
    /* message toast */
    .message-box{position:fixed;top:20px;right:20px;background:#22c55e;color:#fff;padding:12px 16px;border-radius:12px;z-index:1000;display:none;box-shadow:0 10px 30px -10px rgba(0,0,0,.3)}
    /* spinner */
    .lds-dual-ring{display:inline-block;width:20px;height:20px}
    .lds-dual-ring:after{content:" ";display:block;width:16px;height:16px;margin:2px;border-radius:50%;border:3px solid #fff;border-color:#fff transparent #fff transparent;animation:lds 1.2s linear infinite}
    @keyframes lds{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    /* prose helpers */
    .check-bullet i{filter: drop-shadow(0 2px 8px rgba(0,0,0,.15))}
  </style>
</head>
<body class="bg-gradient-to-b from-white to-amber-50/40 text-gray-800 dark:from-[#0b0f14] dark:to-[#0b0f14] dark:text-gray-100">

  <!-- Header local (optionnel si tu importes ton header global) -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/75 dark:bg-[#0b0f14]/80 border-b border-brand-red/10">
    <div class="max-w-6xl mx-auto px-6 py-3 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3 group">
        <img src="../images/off.png" class="h-10 w-10 rounded-full ring-2 ring-brand-yellow bg-white" alt="Logo Optimum" />
        <span class="font-extrabold text-brand-red group-hover:underline decoration-brand-yellow/70">Optimum Entreprise</span>
      </a>
      <div class="flex items-center gap-2">
        <a href="#inscription-form" class="hidden sm:inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-red text-white font-semibold hover:bg-[#4b0e0e] transition">
          <i class="fa-solid fa-bolt"></i> S'inscrire
        </a>
        <button id="dark-toggle" class="w-10 h-10 rounded-full border border-white/20 text-brand-red dark:text-yellow-300 hover:shadow-glow">
          <i class="fa-solid fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 opacity-20 pointer-events-none bg-[radial-gradient(60%_50%_at_50%_0%,rgba(250,204,21,.35),transparent_70%)]"></div>
    <div class="max-w-6xl mx-auto px-6 pt-10 pb-6 text-center">
      <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-brand-red">Formation Programmation</h1>
      <p class="mt-3 text-lg md:text-xl text-gray-700 dark:text-gray-300">Ma√Ætrisez <strong>Python</strong>, <strong>JavaScript</strong>, <strong>HTML/CSS</strong> et cr√©ez des applications modernes.</p>
      <div class="mt-6 inline-flex items-center gap-3 px-4 py-2 rounded-full bg-yellow-100 text-brand-red ring-1 ring-yellow-300 dark:bg-yellow-500/15 dark:ring-yellow-400/40">
        <i class="fa-solid fa-clock"></i> 4 semaines ‚Ä¢ Pr√©sentiel ou en ligne ‚Ä¢ Certificat
      </div>
    </div>
  </section>

  <!-- Contenu principal -->
  <main class="max-w-6xl mx-auto px-6 grid lg:grid-cols-3 gap-8 pb-16">
    <!-- Colonne gauche (infos) -->
    <article class="lg:col-span-2">
      <div class="bg-white dark:bg-white/5 rounded-3xl shadow-xl border border-brand-red/10 overflow-hidden">
        <img src="../images/crea.jpg" alt="Programmation" class="w-full h-64 md:h-80 object-cover" />
        <div class="p-6 md:p-8">
          <h2 class="text-2xl md:text-3xl font-bold text-brand-red mb-3">Ce que vous allez apprendre</h2>
          <ul class="space-y-3 text-[1.05rem] text-gray-700 dark:text-gray-200">
            <li class="flex items-start gap-3 check-bullet"><i class="fa-solid fa-check text-brand-yellow mt-1"></i> Les bases de la programmation (Python, JavaScript)</li>
            <li class="flex items-start gap-3 check-bullet"><i class="fa-solid fa-check text-brand-yellow mt-1"></i> D√©veloppement web (HTML, CSS, JS)</li>
            <li class="flex items-start gap-3 check-bullet"><i class="fa-solid fa-check text-brand-yellow mt-1"></i> Programmation orient√©e objet (POO)</li>
            <li class="flex items-start gap-3 check-bullet"><i class="fa-solid fa-check text-brand-yellow mt-1"></i> Projets concrets : mini-apps, site web</li>
            <li class="flex items-start gap-3 check-bullet"><i class="fa-solid fa-check text-brand-yellow mt-1"></i> Bonnes pratiques & outils modernes</li>
          </ul>

          <h3 class="mt-8 text-2xl font-bold text-brand-red">Pour qui ?</h3>
          <p class="mt-2 text-gray-700 dark:text-gray-300">D√©butants, √©tudiants, reconversion pro, ou toute personne souhaitant acqu√©rir des comp√©tences num√©riques essentielles.</p>

          <h3 class="mt-8 text-2xl font-bold text-brand-red">Modalit√©s</h3>
          <div class="mt-4 grid sm:grid-cols-3 gap-4">
            <div class="p-4 rounded-2xl border border-brand-red/10 bg-yellow-50/60 dark:bg-white/5">
              <div class="font-extrabold text-brand-red">Dur√©e</div>
              <div class="text-sm text-gray-700 dark:text-gray-300">4 semaines (pr√©sentiel ou en ligne)</div>
            </div>
            <div class="p-4 rounded-2xl border border-brand-red/10 bg-yellow-50/60 dark:bg-white/5">
              <div class="font-extrabold text-brand-red">Certificat</div>
              <div class="text-sm text-gray-700 dark:text-gray-300">D√©livr√© en fin de parcours</div>
            </div>
            <div class="p-4 rounded-2xl border border-brand-red/10 bg-yellow-50/60 dark:bg-white/5">
              <div class="font-extrabold text-brand-red">Support</div>
              <div class="text-sm text-gray-700 dark:text-gray-300">P√©dagogique inclus</div>
            </div>
          </div>

          <!-- CTA -->
          <div id="inscription" class="mt-8 flex flex-col sm:flex-row gap-3">
            <a id="cta-whatsapp" href="https://wa.me/243840665620" target="_blank" class="flex-1 inline-flex items-center justify-center gap-2 bg-brand-yellow text-brand-red font-extrabold text-lg py-3 px-5 rounded-full shadow hover:bg-[#ffd84d] transition">
              <i class="fa-brands fa-whatsapp"></i> S'inscrire via WhatsApp
            </a>
            <a href="index.html" class="flex-1 inline-flex items-center justify-center gap-2 bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-100 font-semibold text-lg py-3 px-5 rounded-full shadow hover:bg-gray-300 dark:hover:bg-white/15 transition">
              <i class="fa-solid fa-arrow-left"></i> Retour √† l'accueil
            </a>
          </div>
        </div>
      </div>

      <!-- Assistant IA -->
      <section class="mt-8 p-6 md:p-8 bg-white dark:bg-white/5 rounded-3xl shadow-xl border border-brand-red/10">
        <h4 class="text-xl font-extrabold text-brand-red mb-4">Une question ? Demandez √† notre assistant IA !</h4>
        <div id="chat-container" class="flex flex-col gap-4">
          <div id="chat-messages" class="h-64 overflow-y-auto p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-200/60 dark:border-white/10"></div>
          <div class="flex flex-wrap gap-2">
            <button class="quick-question-btn px-4 py-2 bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-100 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-white/15 transition">Quelle est la dur√©e ?</button>
            <button class="quick-question-btn px-4 py-2 bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-100 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-white/15 transition">Quel est le programme ?</button>
            <button class="quick-question-btn px-4 py-2 bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-100 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-white/15 transition">Prendre un rendez-vous</button>
          </div>
          <div class="flex">
            <input id="user-input" type="text" placeholder="Posez votre question..." class="flex-grow p-3 rounded-l-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
            <button id="send-button" class="bg-brand-red text-white px-5 rounded-r-xl font-semibold hover:bg-[#4b0e0e] transition flex items-center gap-3">
              <span id="button-text">Envoyer</span>
              <div id="loading-spinner" class="lds-dual-ring hidden"></div>
            </button>
          </div>
        </div>
      </section>
    </article>

    <!-- Colonne droite (programme/timeline + points forts) -->
    <aside class="space-y-6">
      <div class="p-6 bg-white dark:bg-white/5 rounded-3xl shadow-xl border border-brand-red/10">
        <h3 class="text-lg font-extrabold text-brand-red">Programme (semaine par semaine)</h3>
        <ol class="mt-3 space-y-3 text-sm text-gray-700 dark:text-gray-300">
          <li><span class="font-bold text-brand-red">S1</span> ‚Äî Logique, Python bases, Git</li>
          <li><span class="font-bold text-brand-red">S2</span> ‚Äî JS moderne (ES6+), DOM</li>
          <li><span class="font-bold text-brand-red">S3</span> ‚Äî HTML/CSS, composants UI</li>
          <li><span class="font-bold text-brand-red">S4</span> ‚Äî Projet final + d√©ploiement</li>
        </ol>
      </div>
      <div class="p-6 bg-white dark:bg-white/5 rounded-3xl shadow-xl border border-brand-red/10">
        <h3 class="text-lg font-extrabold text-brand-red">Pourquoi nous ?</h3>
        <ul class="mt-3 space-y-2 text-sm">
          <li class="flex items-start gap-2"><i class="fa-solid fa-star text-brand-yellow mt-1"></i> P√©dagogie orient√©e projet</li>
          <li class="flex items-start gap-2"><i class="fa-solid fa-user-shield text-brand-yellow mt-1"></i> Coaching & suivi</li>
          <li class="flex items-start gap-2"><i class="fa-solid fa-certificate text-brand-yellow mt-1"></i> Certificat reconnu interne</li>
        </ul>
      </div>
    </aside>
    
 <!-- Formulaire d'inscription -->
<section id="inscription-form" class="col-span-full mt-8">
  <div class="p-6 md:p-8 bg-white dark:bg-white/5 rounded-3xl shadow-xl border border-brand-red/10">
    <h2 class="text-2xl font-extrabold text-brand-red">S'inscrire √† la formation</h2>
    <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
      Remplissez le formulaire ci-dessous. Vous pouvez aussi nous √©crire directement sur
      <a class="underline" target="_blank" href="https://wa.me/243840665620">WhatsApp</a>.
    </p>

    <!-- Exemple d'int√©gration SAAS (d√©sactiv√© par d√©faut) :
         Brevo form embed :
         <iframe src="VOTRE_URL_BREVO" class="w-full h-[560px] rounded-xl border" loading="lazy"></iframe>
    -->

    <!-- Form natif -->
    <form id="form-inscription" class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="text-sm font-semibold" for="nom">Nom complet</label>
        <input id="nom" name="nom" required class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
      </div>
      <div>
        <label class="text-sm font-semibold" for="email">Email</label>
        <input id="email" type="email" name="email" required class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
      </div>
      <div>
        <label class="text-sm font-semibold" for="phone">T√©l√©phone (WhatsApp)</label>
        <input id="phone" name="phone" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
      </div>
      <div>
        <label class="text-sm font-semibold" for="mode">Mode</label>
        <select id="mode" name="mode" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow">
          <option>Pr√©sentiel</option>
          <option>En ligne</option>
        </select>
      </div>
      <div>
        <label class="text-sm font-semibold" for="plan">Plan</label>
        <select id="plan" name="plan" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow">
          <option>Standard</option>
          <option>Intensif</option>
          <option>VIP 1:1</option>
        </select>
      </div>
      <div>
        <label class="text-sm font-semibold" for="cohorte">Cohorte</label>
        <select id="cohorte" name="cohorte" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow"></select>
      </div>
      <div>
        <label class="text-sm font-semibold" for="objectif">Objectif / Projet</label>
        <input id="objectif" name="objectif" placeholder="Ex: cr√©er mon premier site, reconversion‚Ä¶" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
      </div>
      <div>
        <label class="text-sm font-semibold" for="coupon">Code promo (optionnel)</label>
        <input id="coupon" name="coupon" placeholder="OPTIMUM10" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow" />
      </div>
      <div class="md:col-span-2">
        <label class="text-sm font-semibold" for="message">Message</label>
        <textarea id="message" name="message" rows="4" class="mt-1 w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-transparent px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-yellow"></textarea>
      </div>
      <div class="md:col-span-2 flex items-center gap-2 text-sm">
        <input id="rgpd" type="checkbox" required class="rounded border-gray-300" />
        <label for="rgpd">J'accepte d'√™tre recontact√©¬∑e (RGPD).</label>
      </div>
      <div class="md:col-span-2 flex flex-col sm:flex-row gap-3">
        <button type="submit" class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-brand-red text-white py-3 font-semibold hover:bg-[#4b0e0e] transition">
          <i class="fa-solid fa-paper-plane"></i>Envoyer ma demande
        </button>
        <a id="form-whatsapp" target="_blank" class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-brand-yellow text-brand-red py-3 font-extrabold hover:bg-[#ffd84d] transition">
          <i class="fa-brands fa-whatsapp"></i> Poser ma question sur WhatsApp
        </a>
      </div>
    </form>

    <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">
      Vous utilisez Mailchimp/Brevo/Typeform ? Remplacez le formulaire ci-dessus par l'embed (voir commentaire dans le code).
    </p>
  </div>
</section>

  <!-- Toast -->
  <div id="message-box" class="message-box"></div>

  <!-- Scripts -->
  <script>
    // --- Dark mode persistant ---
    (function(){
      const KEY='prefers-dark';
      const root=document.documentElement;
      if(localStorage.getItem(KEY)==='true'){ root.classList.add('dark'); }
      document.getElementById('dark-toggle')?.addEventListener('click',()=>{
        root.classList.toggle('dark');
        localStorage.setItem(KEY, root.classList.contains('dark'));
      });
    })();

    // --- CTA WhatsApp: pr√©remplir message ---
    (function(){
      const btn=document.getElementById('cta-whatsapp');
      const texte=encodeURIComponent("Bonjour Optimum üëã, je souhaite m'inscrire √† la Formation Programmation (4 semaines). Pouvez-vous me guider ?");
      btn?.setAttribute('href', `https://wa.me/243840665620?text=${texte}`);
    })();

    // --- Chat: helpers UI ---
    const chatMessages = document.getElementById('chat-messages');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const loadingSpinner = document.getElementById('loading-spinner');
    const buttonText = document.getElementById('button-text');

    function displayMsg(text, side='left', accent=false){
      const wrap=document.createElement('div');
      wrap.className = `flex ${side==='right'?'justify-end':''} mb-2`;
      wrap.innerHTML = `<div class="${accent?'bg-yellow-100 text-brand-red':'bg-gray-100 dark:bg-white/10 text-gray-800 dark:text-gray-100'} p-3 rounded-xl max-w-xs shadow-sm">${text}</div>`;
      chatMessages.appendChild(wrap); chatMessages.scrollTop=chatMessages.scrollHeight;
    }

    document.querySelectorAll('.quick-question-btn').forEach(b=>b.addEventListener('click',()=>{ userInput.value=b.textContent; sendMessage(); }));

    // --- IMPORTANT S√âCURIT√â ---
    // N'exposez JAMAIS votre cl√© API c√¥t√© client. Servez un endpoint serveur (ex: /api/chat)
    // qui relaie la requ√™te vers votre fournisseur IA et injecte la cl√© via des variables d'environnement.

    async function sendMessage(){
      const msg=userInput.value.trim(); if(!msg) return;
      displayMsg(msg, 'right', true); userInput.value='';
      sendButton.disabled=true; buttonText.classList.add('hidden'); loadingSpinner.classList.remove('hidden');

      // Exemple de payload c√¥t√© serveur (√† impl√©menter):
      // fetch('/api/chat', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({ question: msg, topic:'formation_programmation' }) })
      // Ici, on simule une r√©ponse simple bas√©e sur le contexte fourni.
      try{
        const lower = msg.toLowerCase();
        let reply = "Je n'ai pas bien compris. Pouvez-vous reformuler ?";
        if(lower.includes('dur√©e')) reply = "La formation dure 4 semaines, en pr√©sentiel ou en ligne, avec certificat et support inclus.";
        else if(lower.includes('programme')) reply = "S1: Python & Git ‚Ä¢ S2: JavaScript ES6+ ‚Ä¢ S3: HTML/CSS & UI ‚Ä¢ S4: Projet final & d√©ploiement.";
        else if(lower.includes('rendez') || lower.includes('inscri')) reply = `Parfait ! Prenez rendez-vous ou inscrivez-vous via WhatsApp : <a class="underline font-semibold" target="_blank" href="https://wa.me/243840665620">cliquez ici</a>.`;
        else if(lower.includes('prix') || lower.includes('co√ªt') || lower.includes('tarif')) reply = "Contactez-nous sur WhatsApp pour le tarif actualis√© et les √©ventuelles promotions.";
        displayMsg(reply);
      } catch(err){
        console.error(err);
        displayMsg("D√©sol√©, je rencontre un souci technique. Vous pouvez nous √©crire sur WhatsApp.");
      } finally{
        sendButton.disabled=false; buttonText.classList.remove('hidden'); loadingSpinner.classList.add('hidden');
      }
    }

    sendButton.addEventListener('click', sendMessage);
    userInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); sendMessage(); } });

    // Message d'accueil
    displayMsg("Bonjour ! Je suis l'assistant de la Formation Programmation. Posez vos questions ou demandez un rendez-vous.");

  // --- Cohortes: donn√©es + rendu ---
  (function(){
    const cohorts = [
      { id:'oct-2025', titre:'Cohorte Octobre 2025', debut:'2025-10-06', jours:'Lun, Mer, Ven', horaire:'18:00‚Äì20:30', mode:['Pr√©sentiel','En ligne'] },
      { id:'nov-2025', titre:'Cohorte Novembre 2025', debut:'2025-11-10', jours:'Mar, Jeu, Sam', horaire:'09:00‚Äì11:30', mode:['En ligne'] },
      { id:'jan-2026', titre:'Cohorte Janvier 2026', debut:'2026-01-12', jours:'Lun √† Jeu', horaire:'17:30‚Äì20:00', mode:['Pr√©sentiel'] }
    ];

    const list = document.getElementById('cohort-list');
    if(list){
      list.innerHTML = cohorts.map(c => `
        <div class="rounded-2xl border border-brand-red/15 p-4 bg-yellow-50/40 dark:bg-white/5">
          <div class="text-brand-red font-extrabold">${c.titre}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300"><i class="fa-solid fa-calendar-day"></i> D√©but : ${new Date(c.debut).toLocaleDateString('fr-CD')}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300"><i class="fa-solid fa-clock"></i> ${c.jours} ¬∑ ${c.horaire}</div>
          <div class="text-xs text-gray-600 dark:text-gray-400">Modes : ${c.mode.join(', ')}</div>
        </div>
      `).join('');
    }

    // Remplir le select Cohorte
    const select = document.getElementById('cohorte');
    if(select){
      select.innerHTML = cohorts.map(c => `<option value="${c.id}">${c.titre} ‚Äì ${new Date(c.debut).toLocaleDateString('fr-CD')}</option>`).join('');
    }
  })();

  // --- S√©lecteur de devise (CDF/USD) ---
  (function(){
    const btnCDF = document.getElementById('currency-cdf');
    const btnUSD = document.getElementById('currency-usd');
    const prices = () => Array.from(document.querySelectorAll('.price'));
    function setActive(isCDF){
      btnCDF.setAttribute('aria-pressed', String(isCDF));
      btnUSD.setAttribute('aria-pressed', String(!isCDF));
      if(isCDF){ btnCDF.classList.add('bg-yellow-50','font-semibold'); btnUSD.classList.remove('bg-yellow-50','font-semibold'); }
      else { btnUSD.classList.add('bg-yellow-50','font-semibold'); btnCDF.classList.remove('bg-yellow-50','font-semibold'); }
    }
    function fmtCDF(amount){ return new Intl.NumberFormat('fr-CD').format(amount) + ' CDF'; }
    function fmtUSD(amount){ return '$' + new Intl.NumberFormat('en-US',{minimumFractionDigits:0}).format(amount); }
    function swap(to){
      prices().forEach(el=>{
        const val = to==='CDF' ? el.dataset.cdf : el.dataset.usd;
        el.textContent = to==='CDF' ? fmtCDF(Number(val)) : fmtUSD(Number(val));
      });
      localStorage.setItem('currency', to);
      setActive(to==='CDF');
    }
    btnCDF?.addEventListener('click',()=>swap('CDF'));
    btnUSD?.addEventListener('click',()=>swap('USD'));
    swap(localStorage.getItem('currency')||'CDF');
  })();

  // --- Choix plan depuis cartes de tarifs -> pr√©-s√©lection dans le formulaire ---
  (function(){
    document.querySelectorAll('.select-plan').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const plan = btn.getAttribute('data-plan');
        const select = document.getElementById('plan');
        if(select){ select.value = plan; }
      });
    });
  })();

  // --- Envoi formulaire vers backend + int√©grations Brevo & Mailchimp (via votre serveur) ---
  (function(){
    const form = document.getElementById('form-inscription');
    const wbtn = document.getElementById('form-whatsapp');
    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      // Envoi √† VOTRE backend (qui relayera vers Brevo + Mailchimp)
      try{
        await fetch('/api/inscription', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(data) });
      }catch(_){}
      // Toast
      const toast=document.getElementById('message-box');
      toast.textContent='Merci ! Votre inscription est bien enregistr√©e. Nous revenons vers vous rapidement.';
      toast.style.display='block'; setTimeout(()=>toast.style.display='none', 4000);
      // Lien WhatsApp de secours
      const msg = encodeURIComponent(`Nouvelle inscription ‚Äî Formation Programmation
Nom: ${data.nom}
Email: ${data.email}
T√©l√©phone: ${data.phone||'-'}
Mode: ${data.mode}
Plan: ${data.plan}
Cohorte: ${data.cohorte}
Objectif: ${data.objectif||'-'}
Coupon: ${data.coupon||'-'}`);
      wbtn?.setAttribute('href', `https://wa.me/243840665620?text=${msg}`);
      form.reset();
    });
  })();

  /*
  ====== BACKEND EXEMPLE (Node/Express) ======
  // 1) Mailchimp
  //   - MC_API_KEY (cl√© serveur) ‚Äî ne jamais exposer c√¥t√© client
  //   - MC_SERVER_PREFIX (ex: us21)
  //   - MC_LIST_ID (audience)
  // 2) Brevo (ex Sendinblue)
  //   - BREVO_API_KEY

  import fetch from 'node-fetch';
  app.post('/api/inscription', async (req,res)=>{
    const d=req.body;
    // Mailchimp ‚Äî ajouter le contact √† l'audience avec tag
    await fetch(`https://<MC_SERVER_PREFIX>.api.mailchimp.com/3.0/lists/${process.env.MC_LIST_ID}/members`,{
      method:'POST', headers:{
        'Content-Type':'application/json',
        'Authorization': `apikey ${process.env.MC_API_KEY}`
      }, body:JSON.stringify({
        email_address:d.email, status:'pending',
        merge_fields:{ FNAME:d.nom },
        tags:['Formation Programmation', d.plan]
      })
    });
    // Brevo ‚Äî cr√©er/mettre √† jour le contact et l'ajouter √† une liste
    await fetch('https://api.brevo.com/v3/contacts',{
      method:'POST', headers:{
        'Content-Type':'application/json', 'api-key':process.env.BREVO_API_KEY
      }, body:JSON.stringify({
        email:d.email, attributes:{NOM:d.nom, TELEPHONE:d.phone, PLAN:d.plan, COHORTE:d.cohorte},
        listIds:[123], updateEnabled:true
      })
    });
    res.json({ok:true});
  });
  */
</script>
</body>
</html>

